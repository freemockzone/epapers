<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Free Mock Zone ‚Äî Govt Job Aspirants Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="color-scheme" content="light dark" />
    <style>
        /* ================== General Styles ================== */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* ===== Glass & Animations ===== */
        .glass {
            backdrop-filter: saturate(140%) blur(14px);
            -webkit-backdrop-filter: saturate(140%) blur(14px);
            background: rgba(255, 255, 255, 0.65);
        }

        .dark .glass {
            background: rgba(17, 24, 39, 0.55);
            border: 1px solid rgba(255, 255, 255, 0.06);
        }

        .soft-shadow {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
        }

        .hover-float {
            transition: transform .2s ease, box-shadow .2s ease;
        }

        .hover-float:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 32px rgba(0, 0, 0, 0.10);
        }

        .spin-slow {
            animation: spin 18s linear infinite;
        }

        /* ===== 50-color animated gradient for Subscribe button ===== */
        .subscribe-anim {
            background-size: 400% 400%;
            animation: subscribeGradient 24s linear infinite;
        }

        @keyframes subscribeGradient {
            0% {
                background-position: 0% 50%
            }

            25% {
                background-position: 100% 50%
            }

            50% {
                background-position: 0% 50%
            }

            75% {
                background-position: 100% 50%
            }

            100% {
                background-position: 0% 50%
            }
        }
    </style>
</head>

<body
    class="h-full bg-gradient-to-br from-slate-50 via-white to-slate-100 text-slate-800 dark:from-slate-900 dark:via-slate-950 dark:to-black dark:text-slate-100">

    <div class="min-h-screen grid grid-cols-1 lg:grid-cols-[270px,1fr]">

        <aside id="sidebar" class="glass soft-shadow fixed top-0 left-0 w-64 h-full p-5 flex flex-col gap-6 z-50 transform -translate-x-full transition-transform ease-in-out duration-300
                    lg:sticky lg:top-0 lg:left-auto lg:w-auto lg:h-screen lg:transform-none lg:p-6 lg:z-40">
            <button id="closeSidebar" class="absolute top-4 right-4 text-3xl text-slate-500 lg:hidden">&times;</button>

            <div class="flex items-center gap-3">
                <div
                    class="w-10 h-10 rounded-2xl bg-gradient-to-tr from-indigo-500 via-sky-500 to-emerald-400 spin-slow">
                </div>
                <div>
                    <h1 class="text-xl font-extrabold tracking-tight">Free Mock Zone</h1>
                    <p class="text-xs text-slate-500 dark:text-slate-400 -mt-0.5">Govt Job Aspirants</p>
                </div>
            </div>

            <nav class="mt-1 lg:mt-2">
                <ul class="space-y-2">
                    <li><a href="#dashboard"
                            class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800"><span>üè†</span><span>Dashboard</span></a>
                    </li>
                    <li><a href="#current-affairs"
                            class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800"><span>üóûÔ∏è</span><span>Current
                                Affairs</span></a></li>
                    <li><a href="#epapers"
                            class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800"><span>üìÑ</span><span>ePapers</span></a>
                    </li>
                    <li><a href="#about"
                            class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800"><span>‚ÑπÔ∏è</span><span>About</span></a>
                    </li>
                    <li><a href="#contact"
                            class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800"><span>üìß</span><span>Contact</span></a>
                    </li>
                </ul>
            </nav>

            <div class="mt-auto hidden lg:block">
                <a href="subscribe.html"
                    class="subscribe-anim w-full inline-flex items-center justify-center gap-2 px-4 py-3 rounded-2xl font-bold text-white shadow-lg hover:opacity-95 transition"
                    style="background-image: linear-gradient(135deg,
                    #ff9a9e,#fad0c4,#f6d365,#fda085,#a1c4fd,#c2e9fb,#d4fc79,#96e6a1,#84fab0,#8fd3f4,#fccb90,#d57eeb,
                    #f093fb,#f5576c,#4facfe,#00f2fe,#43e97b,#38f9d7,#fa709a,#fee140,#30cfd0,#330867,#5ee7df,#b490ca,
                    #d299c2,#fef9d7,#fbd786,#c6ffdd,#f7797d,#ffd3a5,#fd6585,#a18cd1,#fbc2eb,#96fbc4,#f9f586,#f8b195,
                    #c6ffdd,#ffecd2,#fcb69f,#ff8177,#ffb199,#6a85b6,#bac8e0,#b6fbff,#83a4d4,#b993d6,#8ca6db,#a1c4fd,#c2e9fb,#ffdde1,#ee9ca7);">
                    üöÄ Subscribe
                </a>
            </div>

            <div class="flex items-center gap-2 pt-2">
                <button id="themeToggle"
                    class="w-full px-3 py-2 rounded-xl bg-slate-900 text-white dark:bg-white dark:text-slate-900 font-semibold hover:opacity-90 transition">
                    Toggle Dark/Light
                </button>
            </div>
        </aside>

        <main class="p-4 sm:p-6 lg:p-8">

            <header id="dashboard" class="mb-6 flex flex-col md:flex-row gap-3 md:items-center md:justify-between">
                <button id="openSidebar" class="p-2 -ml-2 text-2xl text-slate-500 lg:hidden">
                    ‚ò∞
                </button>

                <div>
                    <h2 class="text-2xl sm:text-3xl font-extrabold tracking-tight">Dashboard</h2>
                    <p class="text-sm text-slate-500 dark:text-slate-400">Daily Current Affairs ‚Ä¢ ePapers (auto delete
                        in 24h)</p>
                </div>
                <div class="flex flex-col gap-2 md:flex-row md:items-center">
                    <input id="searchBox" type="search" placeholder="Search current affairs‚Ä¶"
                        class="glass soft-shadow px-4 py-2 rounded-xl outline-none w-full md:w-64 max-w-full text-sm placeholder:text-slate-400" />
                    <a href="subscribe.html"
                        class="subscribe-anim hidden md:inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-white shadow-lg hover:opacity-95 transition"
                        style="background-image: linear-gradient(135deg,
                        #ff9a9e,#fad0c4,#f6d365,#fda085,#a1c4fd,#c2e9fb,#d4fc79,#96e6a1,#84fab0,#8fd3f4,#fccb90,#d57eeb,
                        #f093fb,#f5576c,#4facfe,#00f2fe,#43e97b,#38f9d7,#fa709a,#fee140,#30cfd0,#330867,#5ee7df,#b490ca,
                        #d299c2,#fef9d7,#fbd786,#c6ffdd,#f7797d,#ffd3a5,#fd6585,#a18cd1,#fbc2eb,#96fbc4,#f9f586,#f8b195,
                        #c6ffdd,#ffecd2,#fcb69f,#ff8177,#ffb199,#6a85b6,#bac8e0,#b6fbff,#83a4d4,#b993d6,#8ca6db,#a1c4fd,#c2e9fb,#ffdde1,#ee9ca7);">Subscribe</a>
                </div>
            </header>

            <section class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                <div class="glass soft-shadow rounded-2xl p-5 hover-float">
                    <p class="text-sm text-slate-500 dark:text-slate-400">Today‚Äôs Affairs</p>
                    <p id="statAffairs" class="text-3xl font-extrabold mt-1">0</p>
                </div>
                <div class="glass soft-shadow rounded-2xl p-5 hover-float">
                    <p class="text-sm text-slate-500 dark:text-slate-400">Active ePapers</p>
                    <p id="statPapers" class="text-3xl font-extrabold mt-1">0</p>
                </div>
                <div class="glass soft-shadow rounded-2xl p-5 hover-float">
                    <p class="text-sm text-slate-500 dark:text-slate-400">Expiring <span class="hidden sm:inline">in
                            < 6h</span>
                    </p>
                    <p id="statExpiring" class="text-3xl font-extrabold mt-1">0</p>
                </div>
                <div class="glass soft-shadow rounded-2xl p-5 hover-float">
                    <p class="text-sm text-slate-500 dark:text-slate-400">Subscribers</p>
                    <p class="text-3xl font-extrabold mt-1">1211</p>
                </div>
            </section>

            <section id="current-affairs" class="mb-10">
                <div class="flex flex-col sm:flex-row items-start sm:items-end justify-between mb-4 gap-4">
                    <h3 class="text-xl font-bold">üóûÔ∏è Daily Current Affairs</h3>
                    <div class="flex flex-col sm:flex-row sm:items-center gap-2 text-sm w-full sm:w-auto">
                        <label for="filterDate" class="text-slate-500 dark:text-slate-400 hidden sm:block">Filter
                            date:</label>
                        <input id="filterDate" type="date"
                            class="glass soft-shadow px-3 py-2 rounded-lg outline-none w-full sm:w-auto" />
                        <button id="clearFilters"
                            class="px-3 py-2 rounded-lg bg-slate-900 text-white dark:bg-white dark:text-slate-900">Clear</button>
                    </div>
                </div>

                <div id="affairsFeed" class="space-y-4">
                </div>

                <div id="paginationControls" class="flex justify-center items-center gap-4 mt-6">
                    <button id="prevBtn"
                        class="px-4 py-2 rounded-lg bg-slate-900 text-white dark:bg-white dark:text-slate-900 disabled:opacity-50 disabled:cursor-not-allowed">
                        Previous
                    </button>
                    <span id="pageInfo" class="text-sm text-slate-600 dark:text-slate-300"></span>
                    <button id="nextBtn"
                        class="px-4 py-2 rounded-lg bg-slate-900 text-white dark:bg-white dark:text-slate-900 disabled:opacity-50 disabled:cursor-not-allowed">
                        Next
                    </button>
                </div>
            </section>

            <section id="epapers" class="mb-12">
                <h3 class="text-xl font-bold mb-4">üìÑ Today‚Äôs ePapers (auto-delete after 24h)</h3>
                <div id="epaperGrid" class="grid md:grid-cols-2 xl:grid-cols-3 gap-4">
                </div>
            </section>

            <section id="about" class="glass soft-shadow rounded-2xl p-6 mb-8">
                <h3 class="text-lg font-bold mb-2">‚ÑπÔ∏è About</h3>
                <p class="text-sm leading-6 text-slate-600 dark:text-slate-300">
                    Free Mock Zone is a free portal for SSC, UPSC, Banking, Railways and other competitive exams.
                    We publish Daily Current Affairs and provide popular ePapers for 24 hours to keep access fair and
                    focused.
                </p>
            </section>

            <section id="contact" class="glass soft-shadow rounded-2xl p-6">
                <h3 class="text-lg font-bold mb-2">üìß Contact</h3>
                <p class="text-sm text-slate-600 dark:text-slate-300">
                    Write to us at <a href="mailto:contact@freemockzone.com"
                        class="underline">contact@freemockzone.com</a>
                </p>
            </section>

            <a href="subscribe.html"
                class="subscribe-anim fixed bottom-5 right-5 md:hidden inline-flex items-center gap-2 px-4 py-3 rounded-2xl font-bold text-white shadow-xl"
                style="background-image: linear-gradient(135deg,
                #ff9a9e,#fad0c4,#f6d365,#fda085,#a1c4fd,#c2e9fb,#d4fc79,#96e6a1,#84fab0,#8fd3f4,#fccb90,#d57eeb,
                #f093fb,#f5576c,#4facfe,#00f2fe,#43e97b,#38f9d7,#fa709a,#fee140,#30cfd0,#330867,#5ee7df,#b490ca,
                #d299c2,#fef9d7,#fbd786,#c6ffdd,#f7797d,#ffd3a5,#fd6585,#a18cd1,#fbc2eb,#96fbc4,#f9f586,#f8b195,
                #c6ffdd,#ffecd2,#fcb69f,#ff8177,#ffb199,#6a85b6,#bac8e0,#b6fbff,#83a4d4,#b993d6,#8ca6db,#a1c4fd,#c2e9fb,#ffdde1,#ee9ca7);">
                üöÄ Subscribe
            </a>

            <div id="sidebarBackdrop"
                class="fixed inset-0 bg-black opacity-0 z-40 hidden transition-opacity duration-300 ease-in-out lg:hidden">
            </div>

            <footer class="text-xs mt-12 text-slate-500 dark:text-slate-400 text-center">
                ¬© 2025 Free Mock Zone ‚Ä¢ Built for learners with ‚ù§Ô∏è
            </footer>
        </main>
    </div>

    <script>
        /* ================== THEME ================== */
        const root = document.documentElement;
        const themeToggle = document.getElementById('themeToggle');
        const savedTheme = localStorage.getItem('fmz-theme');
        if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            root.classList.add('dark');
        }
        themeToggle.addEventListener('click', () => {
            root.classList.toggle('dark');
            localStorage.setItem('fmz-theme', root.classList.contains('dark') ? 'dark' : 'light');
        });

        /* ================== MOBILE MENU ================== */
        const sidebar = document.getElementById('sidebar');
        const openSidebarBtn = document.getElementById('openSidebar');
        const closeSidebarBtn = document.getElementById('closeSidebar');
        const sidebarBackdrop = document.getElementById('sidebarBackdrop');

        function toggleSidebar(show) {
            if (show) {
                sidebar.classList.remove('-translate-x-full');
                sidebarBackdrop.classList.remove('hidden');
                setTimeout(() => sidebarBackdrop.classList.add('opacity-40'), 10);
            } else {
                sidebar.classList.add('-translate-x-full');
                sidebarBackdrop.classList.remove('opacity-40');
                setTimeout(() => sidebarBackdrop.classList.add('hidden'), 300);
            }
        }

        openSidebarBtn.addEventListener('click', () => toggleSidebar(true));
        closeSidebarBtn.addEventListener('click', () => toggleSidebar(false));
        sidebarBackdrop.addEventListener('click', () => toggleSidebar(false));

        const navLinks = sidebar.querySelectorAll('a[href^="#"]');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 1024) {
                    toggleSidebar(false);
                }
            });
        });


        /* ================== DATA (edit daily) ================== */
        let currentAffairs = [];
        let filteredAffairs = []; // New variable to hold the filtered articles for pagination
        let currentPage = 1;
        const pageSize = 15; // You can adjust this number

        function getSixAMISTTimestamp() {
            const now = new Date();
            const istOffsetMs = 5.5 * 60 * 60 * 1000;
            const sixAMIST = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 6, 0, 0);
            const localOffsetMs = sixAMIST.getTimezoneOffset() * 60 * 1000;
            const addedAtTimestamp = sixAMIST.getTime() - localOffsetMs - istOffsetMs;
            return addedAtTimestamp;
        }

        const epapers = [
            { title: 'The Hindu Delhi Edition', url: 'https://jumpshare.com/s/dfQyJLhQ0LwFVm3tLEdw', addedAt: getSixAMISTTimestamp(), thumbnailUrl: '1.png' },
            { title: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ç ‡§á‡§Ç‡§∏‡§æ‡§® ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶‡§ø‡§§', url: 'https://limewire.com/d/cvXHm#wMH6ssdi8D', addedAt: getSixAMISTTimestamp(), thumbnailUrl: '2.png' },
            { title: 'Indian Express Delhi', url: 'https://www.transfernow.net/dl/20250822bqp8M3wM', addedAt: getSixAMISTTimestamp(), thumbnailUrl: '3.png' },
            { title: 'Business Line', url: 'businessline.pdf', addedAt: getSixAMISTTimestamp(), thumbnailUrl: 'wip.png' },
            { title: '‡§Æ‡§∂‡•Ä‡§® ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶‡§ø‡§§ - ‡§¶ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ç', url: 'https://jumpshare.com/s/nlXgflWy2j5eSMG1Nfgc', addedAt: getSixAMISTTimestamp(), thumbnailUrl: '5.png' }
        ];

        /* ================== HELPERS ================== */
        const fmtDate = d => new Date(d).toLocaleDateString(undefined, { day: '2-digit', month: 'short', year: 'numeric' });
        const timeLeft = (addedAt) => {
            const expiry = addedAt + 24 * 60 * 60 * 1000;
            const diff = expiry - Date.now();
            if (diff <= 0) return { expired: true, h: 0, m: 0 };
            const h = Math.floor(diff / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            return { expired: false, h, m };
        };

        /* ================== RENDER: AFFAIRS ================== */
        const affairsFeed = document.getElementById('affairsFeed');
        const searchBox = document.getElementById('searchBox');
        const filterDate = document.getElementById('filterDate');
        const clearFilters = document.getElementById('clearFilters');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const pageInfo = document.getElementById('pageInfo');

        function renderPaginatedAffairs() {
            const totalPages = Math.ceil(filteredAffairs.length / pageSize);

            if (filteredAffairs.length === 0) {
                affairsFeed.innerHTML = `<div class="glass soft-shadow rounded-2xl p-6 text-sm">No items match your filter.</div>`;
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
                pageInfo.textContent = '';
                return;
            }

            prevBtn.style.display = 'inline-block';
            nextBtn.style.display = 'inline-block';

            // Calculate start and end indices for the current page
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = Math.min(startIndex + pageSize, filteredAffairs.length);
            const articlesToRender = filteredAffairs.slice(startIndex, endIndex);

            affairsFeed.innerHTML = articlesToRender
                .map(item => `
            <article class="glass soft-shadow rounded-2xl p-5 hover-float">
              <div class="flex items-center justify-between gap-3 mb-1">
                <h4 class="font-semibold">${item.title}</h4>
                <span class="text-xs px-2 py-1 rounded-lg bg-slate-900 text-white dark:bg-white dark:text-slate-900">${fmtDate(item.date)}</span>
              </div>
              <p class="text-sm text-slate-600 dark:text-slate-300">${item.summary}</p>
              <div class="mt-3 flex flex-wrap items-center gap-2">
                ${item.tags?.map(t => `<span class="text-xs px-2 py-1 rounded-full bg-slate-100 dark:bg-slate-800">${t}</span>`).join('')}
                <a href="${item.link}" target="_blank" class="ml-auto text-sm underline">Read more ‚Üí</a>
              </div>
            </article>
            `).join('');

            // Update pagination buttons state
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage >= totalPages;
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        }

        function filterAffairs() {
            const q = (searchBox.value || '').toLowerCase().trim();
            const d = filterDate.value;
            const todayStr = new Date().toISOString().slice(0, 10);

            // Filter the full list of articles
            filteredAffairs = currentAffairs.filter(a => {
                const matchesText = [a.title, a.summary, ...(a.tags || [])].join(' ').toLowerCase().includes(q);
                const matchesDate = d ? a.date === d : (a.date === todayStr);
                return matchesText && matchesDate;
            });

            // Sort them and reset page to 1
            filteredAffairs.sort((a, b) => new Date(b.date) - new Date(a.date));
            currentPage = 1;

            // Render the first page
            renderPaginatedAffairs();

            // Update stats
            document.getElementById('statAffairs').textContent = filteredAffairs.length;
        }

        searchBox.addEventListener('input', filterAffairs);
        filterDate.addEventListener('change', filterAffairs);
        clearFilters.addEventListener('click', () => { searchBox.value = ''; filterDate.value = ''; filterAffairs(); });

        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderPaginatedAffairs();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage * pageSize < filteredAffairs.length) {
                currentPage++;
                renderPaginatedAffairs();
            }
        });

        /* ================== RENDER: EPAPERS ================== */
        const epaperGrid = document.getElementById('epaperGrid');
        function renderPapers() {
            const active = epapers.filter(p => !timeLeft(p.addedAt).expired);
            epaperGrid.innerHTML = active.map(p => {
                const t = timeLeft(p.addedAt);
                const warn = (t.h < 6);
                return `
            <div class="glass soft-shadow rounded-2xl p-5 hover-float flex flex-col gap-3">
              <img src="${p.thumbnailUrl}" alt="Thumbnail for ${p.title}" class="w-full h-[30rem] object-cover rounded-xl" onerror="this.src='https://placehold.co/400x800/E5E7EB/4B5563?text=Image+Not+Found'" />
              
              <div class="flex items-start justify-between gap-3">
                <h4 class="font-semibold">${p.title}</h4>
                <span class="text-[10px] px-2 py-1 rounded-lg ${warn ? 'bg-rose-600 text-white' : 'bg-emerald-600 text-white'}">
                  ${warn ? 'Expiring Soon' : 'Active'}
                </span>
              </div>
              <p class="text-sm text-slate-600 dark:text-slate-300">Available for <b>${String(t.h).padStart(2, '0')}h ${String(t.m).padStart(2, '0')}m</b></p>
              <a href="${p.url}" target="_blank"
                 class="inline-flex justify-center items-center gap-2 px-4 py-2 rounded-xl bg-slate-900 text-white dark:bg-white dark:text-slate-900 font-semibold">
                Download
              </a>
            </div>
            `;
            }).join('');

            document.getElementById('statPapers').textContent = active.length;
            document.getElementById('statExpiring').textContent = active.filter(p => timeLeft(p.addedAt).h < 6).length;
        }

        /* ================== NEW: FETCH & RENDER ================== */
        async function fetchRSSFeed(url, source) {
            const rss2json = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`;
            const res = await fetch(rss2json);
            const data = await res.json();
            return data.items.map(item => ({
                date: new Date(item.pubDate).toISOString().slice(0, 10),
                title: item.title,
                summary: item.description.replace(/<[^>]+>/g, '').slice(0, 150) + "...",
                link: item.link,
                tags: [source]
            }));
        }

        async function loadCurrentAffairs() {
            const feeds = [
                { url: "https://www.thehindu.com/news/national/feeder/default.rss", source: "The Hindu" },
                { url: "https://indianexpress.com/feed/", source: "Indian Express" },
                { url: "https://economictimes.indiatimes.com/rssfeedsdefault.cms", source: "Economic Times" },
                { url: "https://www.jagran.com/rss/news/national.xml", source: "Jagran" },
                { url: "https://www.livemint.com/rss/homepage", source: "Mint" },
                { url: "https://timesofindia.indiatimes.com/rssfeedstopstories.cms", source: "Times of India" },
                { url: "https://www.thehindubusinessline.com/feeder/default.rss", source: "Business Line" }
            ];

            let articles = [];
            for (const f of feeds) {
                try {
                    const list = await fetchRSSFeed(f.url, f.source);
                    articles = articles.concat(list);
                } catch (e) {
                    console.error("Error fetching feed:", f.source, e);
                }
            }
            currentAffairs = articles;
            filterAffairs();
        }

        /* ================== INIT ================== */
        function init() {
            renderPapers();
            loadCurrentAffairs();
            setInterval(renderPapers, 60000);
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>